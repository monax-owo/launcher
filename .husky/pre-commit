staged=$(git diff --cached --name-only --diff-filter=ACMR)
prettier=$(sed 's| |\\ |g' <<< $staged)
rs=$(grep '\.rs$' <<< $staged || echo "")

echo $staged
echo $prettier
echo $rs

if [ -n "$rs" ]; then
  echo ".rs files found"
  cargo clippy --fix --allow-dirty --allow-staged --manifest-path ./src-tauri/Cargo.toml || exit
else
  echo ".rs files not found"
fi

pnpm prettier $prettier --write -u
pnpm lint-staged
